<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
        @font-face {
                font-family: gotham;
                src: url(/gotham-book-regular.otf);
            }
            body {
                background-color: #f2f0eb;
            }
            * {
                font-family: Helvetica Neue;
            }
            a:link,a:visited {
                color: #5e3f99;
            }
            img {
                max-width: 40%;
                height: auto;
            }
            input[type=text]:focus {
                border-color:   #f68826;
                box-shadow: 0 0 5px #f68826 !important;
            }
            input[type=email]:focus {
                border-color:   #f68826;
                box-shadow: 0 0 5px #f68826 !important;
            }


    </style>
        <title>Too Early</title>
        <script src="https://unpkg.com/jquery"></script>

        <script src="https://unpkg.com/survey-jquery@0.12.10/survey.jquery.min.js"></script>

        <link rel="stylesheet" href="https://unpkg.com/bootstrap@3.3.7/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="./index.css">

    </head>
    <body>
        <center><a href="http://www.laureateinstitute.org/"><img class="logo" src="/images/logo.png"></a></center>
        

        <!-- Showing Time Elapsed
        <div style="position: fixed; left : 50% ;  background-color: #ff9900;"><center><p id="mkId"></p></center><p id="timeOutput"></p></div>
         -->
        
        <center>
            <div class="container-fluid">
                <hr style="border-top:5px solid #b1b3b6" />
                <br>
                <h1 style="padding: 17px" >Thank you for completing Session 1!</h1>
                <p id='mkturk_id'></p>
                <p> Please Log back in:</p>
                <p style="color:red;font-size: 60px;font-weight: bold" id="demo"></p> 
                <p style="font-size: 30px;"> To complete Session 2!!</p>
                <p style="font-size: 15px;">If you have provided an email, we will send a reminder when session 2 is ready for you to complete.</p>
                <br>
                <p style="color:red;font-size: 20px; font-weight: : bold">You must complete session 2 to receive payment for HIT</p>
                <br>
                <br>

            </div>
        </center>

        <div class="container-fluid">
            <center><p class="text-p">&copy; 2018 <a href="http://www.laureateinstitute.org">laureateinstitute.org</a>. All rights reserved.</center>
        </div>


        <script type="text/javascript">

            function getQueryVariable(variable) {
                var query = window.location.search.substring(1);
                var vars = query.split('&');
                for (var i = 0; i < vars.length; i++) {
                    var pair = vars[i].split('=');
                    if (decodeURIComponent(pair[0]) == variable) {
                        return decodeURIComponent(pair[1]);
                    }
                }
                return 'NULL'
            }

            // Get Query Variables


            var mkturkid = getQueryVariable('mkturk_id');
            var timeleft;


            document.getElementById("mkturk_id").innerHTML = 'Hi ' + mkturkid + ',';


            // get time ready

            if (getQueryVariable('study') == "wave2"){
                $.get('/getTimeReadyWave2?mkturk_id=' + mkturkid + '&study=wave2' , function(data) {
                    timeleft = data;
                    //document.getElementById("phqscore").innerHTML = data;
                    //timeleft
                    var countDownDate = new Date(decodeURIComponent(timeleft)).getTime();

                    // Update the count down every 1 second
                    var x = setInterval(function() {


                        // Get todays date and time
                        var now = new Date().getTime();
                        
                        // Find the distance between now an the count down date
                        var distance = countDownDate - now;
                        
                        // Time calculations for days, hours, minutes and seconds
                        var days = Math.floor(distance / (1000 * 60 * 60 * 24));
                        var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                        var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                        var seconds = Math.floor((distance % (1000 * 60)) / 1000);
                        
                        // Output the result in an element with id="demo"
                        document.getElementById("demo").innerHTML = hours + "h "
                        + minutes + "m " + seconds + "s ";
                        
                        // If the count down is over, write some text
                        // If the count down is over, redirect to session 2
                        if (distance < 0) {
                            clearInterval(x);
                            window.location.href = "/?session=2"+"&mkturk_id="+mkturkid+"&survey=demo" + "&study=" + getQueryVariable('study');
                            document.getElementById("demo").innerHTML = "EXPIRED";
                        }
                    }, 500);
                });
            } else {
                $.get('/getTimeReady?mkturk_id=' + mkturkid + '&study=' + getQueryVariable('study') , function(data) {
                    timeleft = data;
                    //document.getElementById("phqscore").innerHTML = data;

                    //timeleft
                    var countDownDate = new Date(decodeURIComponent(timeleft)).getTime();

                    // Update the count down every 1 second
                    var x = setInterval(function() {


                        // Get todays date and time
                        var now = new Date().getTime();
                        
                        // Find the distance between now an the count down date
                        var distance = countDownDate - now;
                        
                        // Time calculations for days, hours, minutes and seconds
                        var days = Math.floor(distance / (1000 * 60 * 60 * 24));
                        var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                        var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                        var seconds = Math.floor((distance % (1000 * 60)) / 1000);
                        
                        // Output the result in an element with id="demo"
                        document.getElementById("demo").innerHTML = hours + "h "
                        + minutes + "m " + seconds + "s ";
                        
                        // If the count down is over, write some text
                        // If the count down is over, redirect to session 2
                        if (distance < 0) {
                            clearInterval(x);
                            window.location.href = "/?session=2"+"&mkturk_id="+mkturkid+"&survey=demo" + "&study=" + getQueryVariable('study');
                            document.getElementById("demo").innerHTML = "EXPIRED";
                        }
                    }, 500);
                });
            }
    
            

            
            //$("#timeleft").text(timeleft);
        </script>
        <script>
            // Set the date we're counting down to

            // date format: "Sep 5, 2018 15:37:25"

        </script>

    </body>
</html>