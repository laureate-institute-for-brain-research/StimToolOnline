<!DOCTYPE html>
<html lang="en">

<head>
    <style type="text/css">
        @font-face {
            font-family: gotham;
            src: url(/gotham-book-regular.otf);
        }

        * {
            font-family: Helvetica Neue;
        }

        a:link,
        a:visited {
            color: #5e3f99;
        }

        input[type=text]:focus {
            border-color: #f68826;
            box-shadow: 0 0 5px #f68826 !important;
        }

        input[type=email]:focus {
            border-color: #f68826;
            box-shadow: 0 0 5px #f68826 !important;
        }

        span {
            color: #969696!important;
            fill: #969696!important;
        }

        .sv-root-modern .sv-container-modern {
            color:#969696!important;
            fill:#969696!important;
        }
        .sv-radio__svg {
            border-color: #969696!important;
        }

        .sv-root-modern .sv-radio--checked .sv-radio__svg  {
            fill: #969696!important;
        }

        .sv-root-modern input.sv-text, textarea.sv-comment, select.sv-dropdown{
            color: #969696!important;
        }

        input[type=button] {
            color: black !important;
        }
        
    </style>
    <title>Demographics Survey</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>

    <!-- Latest compiled and minified CSS -->
    <!-- Using Bootsawtch theme: https://bootswatch.com/cyborg/ -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">


    <!-- Latest compiled and minified JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>

    <link href="https://unpkg.com/survey-knockout@1.8.41/modern.css" type="text/css" rel="stylesheet"/>
    <script src="https://unpkg.com/jquery"></script>
    <script type="text/javascript" src="https://unpkg.com/survey-core/survey.core.min.js"></script>
    <script type="text/javascript" src="https://unpkg.com/survey-js-ui/survey-js-ui.min.js"></script>

    <script type="text/javascript" src='/js/StimToolLib.js'></script>

</head>

<body>

    <div class="container" style="max-width: 400px;">
        <div class="py-5 text-center">
            <img class="d-block mx-auto mb-4" src="/images/logo_reversed.jpg" alt="" width="180" height="50">
            <h4>Demographics Survey</h4>
          </div>
    </div>

    <!-- <center id="welcome_message" style="visibility: hidden">
        <h1>Welcome Back!</h1>
        <p>Please continue to with session 2!</p>
    </center> -->
    <!-- Modal -->
    <div class="modal fade" id="welcome_message" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
            <h1 class="modal-title" id="exampleModalLabel">Welcome Back!</h1>
            </div>
            <div class="modal-body">
            <p>You're almost done! For session 2, you will complete the same surveys and task as session 1.<br><br>
                After the task portion, you will complete a feedback survey and then recieve a code to submit on MTURK.
            </p>
            </div>
            <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
        </div>
    </div>

    <div class="container" style="max-width: 400px;">
        <div class="row" >
            <div id="surveyElement" style="margin-bottom:40px"></div>
            
            <div id="surveyResult"></div>
        </div>
    </div>

    <div class="jumbotron container" style="margin-bottom:0;max-width: 400px;">
        <table class="table table-hover">
            <tbody>
                <tr>
                  <th scope="row">ID:</th>
                  <td><a id="participant"></a></td>
                </tr>
                <tr>
                    <th scope="row">Session:</th>
                    <td><a id="session"></a></td>
                  </tr>
                  <tr>
                    <th scope="row">Study:</th>
                    <td><a id="study"></a></td>
                  </tr>
              </tbody>
        </table>
        <p style="text-align: center;">&copy; 2021 <a href="http://www.laureateinstitute.org">laureateinstitute.org</a>. All rights reserved.</p>
    </div>

    <script type="text/javascript">

        Survey
            .StylesManager
            .applyTheme("modern");
        // Survey.Survey.cssType = "bootstrap";
        // Survey.defaultBootstrapCss.navigationButton = "btn";
        var json = {
            "title": "Demographic Survey",
            "description": "MTurk demographic survey for Well-Being",
            "logoPosition": "right",
            "pages": [{
                "name": "page1",
                "elements": [{
                    "type": "radiogroup",
                    "name": "question1_sex",
                    "title": "What is your sex assigned at birth?",
                    "isRequired": true,
                    "choices": [{
                        "value": "female",
                        "text": "Female"
                    }, {
                        "value": "male",
                        "text": "Male"
                    }, {
                        "value": "other",
                        "text": "Intersex/Other"
                    }]
                }]
            }, {
                "name": "page2",
                "elements": [{
                    "type": "radiogroup",
                    "name": "question2_gender",
                    "title": "What is your gender identity?",
                    "isRequired": true,
                    "choices": [{
                        "value": "Cisgender Woman",
                        "text": "Cisgender Woman"
                    }, {
                        "value": "Cisgender Man",
                        "text": "Cisgender Man"
                    }, {
                        "value": "Transgender Woman",
                        "text": "Transgender Woman"
                    }, {
                        "value": "Transgender Man",
                        "text": "Transgender Man"
                    }, {
                        "value": "Non-binary",
                        "text": "Non-binary"
                    }, {
                        "value": "Genderqueer/Gender nonconforming",
                        "text": "Genderqueer/Gender nonconforming"
                    }, {
                        "value": "Prefer not to say",
                        "text": "Prefer not to say"
                    }],
                    "showOtherItem": true
                }]
            }, {
                "name": "page3",
                "elements": [{
                    "type": "radiogroup",
                    "name": "question15_sexual-orientation",
                    "title": "What is your sexual orientation?",
                    "isRequired": true,
                    "choices": [{
                        "value": "Asexual",
                        "text": "Asexual"
                    }, {
                        "value": "Bisexual",
                        "text": "Bisexual"
                    }, {
                        "value": "Demisexual",
                        "text": "Demisexual"
                    }, {
                        "value": "Gay/Lesbian",
                        "text": "Gay/Lesbian"
                    }, {
                        "value": "Heterosexual/Straight",
                        "text": "Heterosexual/Straight"
                    }, {
                        "value": "Pansexual",
                        "text": "Pansexual"
                    }, {
                        "value": "Prefer not to say",
                        "text": "Prefer not to say"
                    }],
                    "showOtherItem": true
                }]
            }, {
                "name": "page4",
                "elements": [{
                    "type": "text",
                    "name": "question3_age",
                    "title": "What is your current age (in years)?",
                    "isRequired": true,
                    "inputType": "number",
                    "min": 0,
                    "max": 99
                }]
            }, {
                "name": "page5",
                "elements": [{
                    "type": "dropdown",
                    "name": "question4_country",
                    "title": "Select the country you live in:",
                    "isRequired": true,
                    "choices": [{'value': 'Afghanistan', 'text': 'Afghanistan'}, 
                    {'value': 'Albania', 'text': 'Albania'}, 
                    {'value': 'Algeria', 'text': 'Algeria'}, 
                    {'value': 'Andorra', 'text': 'Andorra'}, 
                    {'value': 'Angola', 'text': 'Angola'}, 
                    {'value': 'Antigua & Deps', 'text': 'Antigua & Deps'}, 
                    {'value': 'Argentina', 'text': 'Argentina'}, 
                    {'value': 'Armenia', 'text': 'Armenia'}, 
                    {'value': 'Australia', 'text': 'Australia'}, 
                    {'value': 'Austria', 'text': 'Austria'}, 
                    {'value': 'Azerbaijan', 'text': 'Azerbaijan'}, 
                    {'value': 'Bahamas', 'text': 'Bahamas'}, 
                    {'value': 'Bahrain', 'text': 'Bahrain'}, 
                    {'value': 'Bangladesh', 'text': 'Bangladesh'}, 
                    {'value': 'Barbados', 'text': 'Barbados'}, 
                    {'value': 'Belarus', 'text': 'Belarus'}, 
                    {'value': 'Belgium', 'text': 'Belgium'}, 
                    {'value': 'Belize', 'text': 'Belize'}, 
                    {'value': 'Benin', 'text': 'Benin'}, 
                    {'value': 'Bhutan', 'text': 'Bhutan'}, 
                    {'value': 'Bolivia', 'text': 'Bolivia'}, 
                    {'value': 'Bosnia Herzegovina', 'text': 'Bosnia Herzegovina'}, 
                    {'value': 'Botswana', 'text': 'Botswana'}, 
                    {'value': 'Brazil', 'text': 'Brazil'}, 
                    {'value': 'Brunei', 'text': 'Brunei'}, 
                    {'value': 'Bulgaria', 'text': 'Bulgaria'}, 
                    {'value': 'Burkina', 'text': 'Burkina'}, 
                    {'value': 'Burundi', 'text': 'Burundi'}, 
                    {'value': 'Cambodia', 'text': 'Cambodia'}, 
                    {'value': 'Cameroon', 'text': 'Cameroon'}, 
                    {'value': 'Canada', 'text': 'Canada'}, 
                    {'value': 'Cape Verde', 'text': 'Cape Verde'}, 
                    {'value': 'Central African Rep', 'text': 'Central African Rep'}, 
                    {'value': 'Chad', 'text': 'Chad'}, 
                    {'value': 'Chile', 'text': 'Chile'}, 
                    {'value': 'China', 'text': 'China'}, 
                    {'value': 'Colombia', 'text': 'Colombia'}, 
                    {'value': 'Comoros', 'text': 'Comoros'}, 
                    {'value': 'Congo', 'text': 'Congo'}, 
                    {'value': 'Congo {Democratic Rep}', 'text': 'Congo {Democratic Rep}'}, 
                    {'value': 'Costa Rica', 'text': 'Costa Rica'}, 
                    {'value': 'Croatia', 'text': 'Croatia'}, 
                    {'value': 'Cuba', 'text': 'Cuba'}, 
                    {'value': 'Cyprus', 'text': 'Cyprus'}, 
                    {'value': 'Czech Republic', 'text': 'Czech Republic'}, 
                    {'value': 'Denmark', 'text': 'Denmark'}, 
                    {'value': 'Djibouti', 'text': 'Djibouti'}, 
                    {'value': 'Dominica', 'text': 'Dominica'}, 
                    {'value': 'Dominican Republic', 'text': 'Dominican Republic'}, 
                    {'value': 'East Timor', 'text': 'East Timor'}, 
                    {'value': 'Ecuador', 'text': 'Ecuador'}, 
                    {'value': 'Egypt', 'text': 'Egypt'}, 
                    {'value': 'El Salvador', 'text': 'El Salvador'}, 
                    {'value': 'Equatorial Guinea', 'text': 'Equatorial Guinea'}, 
                    {'value': 'Eritrea', 'text': 'Eritrea'}, 
                    {'value': 'Estonia', 'text': 'Estonia'}, 
                    {'value': 'Ethiopia', 'text': 'Ethiopia'}, 
                    {'value': 'Fiji', 'text': 'Fiji'}, 
                    {'value': 'Finland', 'text': 'Finland'}, 
                    {'value': 'France', 'text': 'France'}, 
                    {'value': 'Gabon', 'text': 'Gabon'}, 
                    {'value': 'Gambia', 'text': 'Gambia'}, 
                    {'value': 'Georgia', 'text': 'Georgia'}, 
                    {'value': 'Germany', 'text': 'Germany'}, 
                    {'value': 'Ghana', 'text': 'Ghana'}, 
                    {'value': 'Greece', 'text': 'Greece'}, 
                    {'value': 'Grenada', 'text': 'Grenada'}, 
                    {'value': 'Guatemala', 'text': 'Guatemala'}, 
                    {'value': 'Guinea', 'text': 'Guinea'}, 
                    {'value': 'Guinea-Bissau', 'text': 'Guinea-Bissau'}, 
                    {'value': 'Guyana', 'text': 'Guyana'}, 
                    {'value': 'Haiti', 'text': 'Haiti'}, 
                    {'value': 'Honduras', 'text': 'Honduras'}, 
                    {'value': 'Hungary', 'text': 'Hungary'}, 
                    {'value': 'Iceland', 'text': 'Iceland'}, 
                    {'value': 'India', 'text': 'India'}, 
                    {'value': 'Indonesia', 'text': 'Indonesia'}, 
                    {'value': 'Iran', 'text': 'Iran'}, 
                    {'value': 'Iraq', 'text': 'Iraq'}, 
                    {'value': 'Ireland {Republic}', 'text': 'Ireland {Republic}'}, 
                    {'value': 'Israel', 'text': 'Israel'}, 
                    {'value': 'Italy', 'text': 'Italy'}, 
                    {'value': 'Ivory Coast', 'text': 'Ivory Coast'}, 
                    {'value': 'Jamaica', 'text': 'Jamaica'}, 
                    {'value': 'Japan', 'text': 'Japan'}, 
                    {'value': 'Jordan', 'text': 'Jordan'}, 
                    {'value': 'Kazakhstan', 'text': 'Kazakhstan'}, 
                    {'value': 'Kenya', 'text': 'Kenya'}, 
                    {'value': 'Kiribati', 'text': 'Kiribati'}, 
                    {'value': 'Korea North', 'text': 'Korea North'}, 
                    {'value': 'Korea South', 'text': 'Korea South'}, 
                    {'value': 'Kosovo', 'text': 'Kosovo'}, 
                    {'value': 'Kuwait', 'text': 'Kuwait'}, 
                    {'value': 'Kyrgyzstan', 'text': 'Kyrgyzstan'}, 
                    {'value': 'Laos', 'text': 'Laos'}, 
                    {'value': 'Latvia', 'text': 'Latvia'}, 
                    {'value': 'Lebanon', 'text': 'Lebanon'}, 
                    {'value': 'Lesotho', 'text': 'Lesotho'}, 
                    {'value': 'Liberia', 'text': 'Liberia'}, 
                    {'value': 'Libya', 'text': 'Libya'}, 
                    {'value': 'Liechtenstein', 'text': 'Liechtenstein'}, 
                    {'value': 'Lithuania', 'text': 'Lithuania'}, 
                    {'value': 'Luxembourg', 'text': 'Luxembourg'}, 
                    {'value': 'Macedonia', 'text': 'Macedonia'}, 
                    {'value': 'Madagascar', 'text': 'Madagascar'}, 
                    {'value': 'Malawi', 'text': 'Malawi'}, 
                    {'value': 'Malaysia', 'text': 'Malaysia'}, 
                    {'value': 'Maldives', 'text': 'Maldives'}, 
                    {'value': 'Mali', 'text': 'Mali'}, 
                    {'value': 'Malta', 'text': 'Malta'}, 
                    {'value': 'Marshall Islands', 'text': 'Marshall Islands'}, 
                    {'value': 'Mauritania', 'text': 'Mauritania'}, 
                    {'value': 'Mauritius', 'text': 'Mauritius'}, 
                    {'value': 'Mexico', 'text': 'Mexico'}, 
                    {'value': 'Micronesia', 'text': 'Micronesia'}, 
                    {'value': 'Moldova', 'text': 'Moldova'}, 
                    {'value': 'Monaco', 'text': 'Monaco'}, 
                    {'value': 'Mongolia', 'text': 'Mongolia'}, 
                    {'value': 'Montenegro', 'text': 'Montenegro'}, 
                    {'value': 'Morocco', 'text': 'Morocco'}, 
                    {'value': 'Mozambique', 'text': 'Mozambique'}, 
                    {'value': 'Myanmar, {Burma}', 'text': 'Myanmar, {Burma}'}, 
                    {'value': 'Namibia', 'text': 'Namibia'}, 
                    {'value': 'Nauru', 'text': 'Nauru'}, 
                    {'value': 'Nepal', 'text': 'Nepal'}, 
                    {'value': 'Netherlands', 'text': 'Netherlands'}, 
                    {'value': 'New Zealand', 'text': 'New Zealand'}, 
                    {'value': 'Nicaragua', 'text': 'Nicaragua'}, 
                    {'value': 'Niger', 'text': 'Niger'}, 
                    {'value': 'Nigeria', 'text': 'Nigeria'}, 
                    {'value': 'Norway', 'text': 'Norway'}, 
                    {'value': 'Oman', 'text': 'Oman'}, 
                    {'value': 'Pakistan', 'text': 'Pakistan'}, 
                    {'value': 'Palau', 'text': 'Palau'}, 
                    {'value': 'Panama', 'text': 'Panama'}, 
                    {'value': 'Papua New Guinea', 'text': 'Papua New Guinea'}, 
                    {'value': 'Paraguay', 'text': 'Paraguay'}, 
                    {'value': 'Peru', 'text': 'Peru'}, 
                    {'value': 'Philippines', 'text': 'Philippines'}, 
                    {'value': 'Poland', 'text': 'Poland'}, 
                    {'value': 'Portugal', 'text': 'Portugal'}, 
                    {'value': 'Qatar', 'text': 'Qatar'}, 
                    {'value': 'Romania', 'text': 'Romania'}, 
                    {'value': 'Russian Federation', 'text': 'Russian Federation'}, 
                    {'value': 'Rwanda', 'text': 'Rwanda'}, 
                    {'value': 'St Kitts & Nevis', 'text': 'St Kitts & Nevis'}, 
                    {'value': 'St Lucia', 'text': 'St Lucia'}, 
                    {'value': 'Saint Vincent & the Grenadines', 'text': 'Saint Vincent & the Grenadines'}, 
                    {'value': 'Samoa', 'text': 'Samoa'}, {'value': 'San Marino', 'text': 'San Marino'}, 
                    {'value': 'Sao Tome & Principe', 'text': 'Sao Tome & Principe'}, 
                    {'value': 'Saudi Arabia', 'text': 'Saudi Arabia'}, 
                    {'value': 'Senegal', 'text': 'Senegal'}, 
                    {'value': 'Serbia', 'text': 'Serbia'}, 
                    {'value': 'Seychelles', 'text': 'Seychelles'}, 
                    {'value': 'Sierra Leone', 'text': 'Sierra Leone'}, 
                    {'value': 'Singapore', 'text': 'Singapore'}, 
                    {'value': 'Slovakia', 'text': 'Slovakia'}, 
                    {'value': 'Slovenia', 'text': 'Slovenia'}, 
                    {'value': 'Solomon Islands', 'text': 'Solomon Islands'}, 
                    {'value': 'Somalia', 'text': 'Somalia'}, 
                    {'value': 'South Africa', 'text': 'South Africa'}, 
                    {'value': 'South Sudan', 'text': 'South Sudan'}, 
                    {'value': 'Spain', 'text': 'Spain'}, 
                    {'value': 'Sri Lanka', 'text': 'Sri Lanka'}, 
                    {'value': 'Sudan', 'text': 'Sudan'}, 
                    {'value': 'Suriname', 'text': 'Suriname'}, 
                    {'value': 'Swaziland', 'text': 'Swaziland'}, 
                    {'value': 'Sweden', 'text': 'Sweden'}, 
                    {'value': 'Switzerland', 'text': 'Switzerland'}, 
                    {'value': 'Syria', 'text': 'Syria'}, 
                    {'value': 'Taiwan', 'text': 'Taiwan'}, 
                    {'value': 'Tajikistan', 'text': 'Tajikistan'}, 
                    {'value': 'Tanzania', 'text': 'Tanzania'}, 
                    {'value': 'Thailand', 'text': 'Thailand'}, 
                    {'value': 'Togo', 'text': 'Togo'}, 
                    {'value': 'Tonga', 'text': 'Tonga'}, 
                    {'value': 'Trinidad & Tobago', 'text': 'Trinidad & Tobago'}, 
                    {'value': 'Tunisia', 'text': 'Tunisia'}, 
                    {'value': 'Turkey', 'text': 'Turkey'}, 
                    {'value': 'Turkmenistan', 'text': 'Turkmenistan'}, 
                    {'value': 'Tuvalu', 'text': 'Tuvalu'}, 
                    {'value': 'Uganda', 'text': 'Uganda'}, 
                    {'value': 'Ukraine', 'text': 'Ukraine'}, 
                    {'value': 'United Arab Emirates', 'text': 'United Arab Emirates'}, 
                    {'value': 'United Kingdom', 'text': 'United Kingdom'}, 
                    {'value': 'United States', 'text': 'United States'}, 
                    {'value': 'Uruguay', 'text': 'Uruguay'}, 
                    {'value': 'Uzbekistan', 'text': 'Uzbekistan'}, 
                    {'value': 'Vanuatu', 'text': 'Vanuatu'}, 
                    {'value': 'Vatican City', 'text': 'Vatican City'}, 
                    {'value': 'Venezuela', 'text': 'Venezuela'}, 
                    {'value': 'Vietnam', 'text': 'Vietnam'}, {'value': 'Yemen', 'text': 'Yemen'}, {'value': 'Zambia', 'text': 'Zambia'}, {'value': 'Zimbabwe', 'text': 'Zimbabwe'}]
                }]
            }, {
                "name": "page6",
                "elements": [{
                    "type": "checkbox",
                    "name": "question6_race",
                    "title": "What is your race? Please select one or more of these options:",
                    "isRequired": true,
                    "choices": [{
                        "value": "Asian",
                        "text": "Asian"
                    }, {
                        "value": "Black/African American",
                        "text": "Black/African American"
                    }, {
                        "value": "American Indian/Alaskan Native",
                        "text": "American Indian/Alaskan Native"
                    }, {
                        "value": "Native Hawaiian/Pacific Islander",
                        "text": "Native Hawaiian/Pacific Islander"
                    }, {
                        "value": "White",
                        "text": "White"
                    }, {
                        "value": "Prefer not to answer",
                        "text": "Prefer not to answer"
                    }, {
                        "value": "I don't know",
                        "text": "I don't know"
                    }],
                    "showOtherItem": true
                }, {
                    "type": "radiogroup",
                    "name": "question5_eth",
                    "title": "Are you Hispanic/Latinx [where did your ancestors come from]?",
                    "isRequired": true,
                    "choices": [{
                        "value": "yes",
                        "text": "Yes"
                    }, {
                        "value": "no",
                        "text": "No"
                    }, {
                        "value": "Prefer not to say",
                        "text": "Prefer not to say"
                    }, {
                        "value": "I don't know",
                        "text": "I don't know"
                    }]
                }]
            }, {
                "name": "page7",
                "elements": [{
                    "type": "radiogroup",
                    "name": "question7_english",
                    "title": "Is English your primary language?",
                    "isRequired": true,
                    "choices": [{
                        "value": "yes",
                        "text": "Yes"
                    }, {
                        "value": "no",
                        "text": "No"
                    }]
                }, {
                 "type": "dropdown",
                 "name": "primaryLang",
                 "title": "Primary Language",
                 "visibleIf":"{question7_english} = 'no'",
                 "requiredIf": "{question7_english} = 'no'",
                 "choices": [
                  {
                   "value": "English",
                   "text": "English"
                  },
                  {
                   "value": "Mandarin",
                   "text": "Mandarin"
                  },
                  {
                   "value": "Spanish",
                   "text": "Spanish"
                  },
                  {
                   "value": "Hindi",
                   "text": "Hindi"
                  },
                  {
                   "value": "Portuguese",
                   "text": "Portuguese"
                  },
                  {
                   "value": "Bengali",
                   "text": "Bengali"
                  },
                  {
                   "value": "Russian",
                   "text": "Russian"
                  },
                  {
                   "value": "Japanese",
                   "text": "Japanese"
                  },
                  {
                   "value": "Vietnamese",
                   "text": "Vietnamese"
                  },
                  {
                   "value": "Turkish",
                   "text": "Turkish"
                  },
                  {
                   "value": "Marathi",
                   "text": "Marathi"
                  },
                  {
                   "value": "Telugu",
                   "text": "Telugu"
                  },
                  {
                   "value": "Korean",
                   "text": "Korean"
                  },
                  {
                   "value": "French",
                   "text": "French"
                  },
                  {
                   "value": "Tamil",
                   "text": "Tamil"
                  },
                  {
                   "value": "Arabic",
                   "text": "Arabic"
                  },
                  {
                   "value": "German",
                   "text": "German"
                  },
                  {
                   "value": "Urdu",
                   "text": "Urdu"
                  },
                  {
                   "value": "Javanese",
                   "text": "Javanese"
                  },
                  {
                   "value": "Punjabi",
                   "text": "Punjabi"
                  },
                  {
                   "value": "Italian",
                   "text": "Italian"
                  },
                  {
                   "value": "Gujarati",
                   "text": "Gujarati"
                  },
                  {
                   "value": "Iranian Persian",
                   "text": "Iranian Persian"
                  },
                  {
                   "value": "Bhojpuri",
                   "text": "Bhojpuri"
                  },
                  {
                   "value": "Hausa",
                   "text": "Hausa"
                  },
                  {
                   "value": "Other",
                   "text": "Other"
                  }
                 ]
                },
                {
                 "type": "text",
                 "name": "primaryLangOther",
                 "visibleIf": "{primaryLang} = 'Other'",
                 "requiredIf": "{primaryLang} = 'Other'",
                 "title": "Other Primary Language"
                }]
            }, {
                "name": "page8",
                "elements": [{
                    "type": "radiogroup",
                    "name": "question9_relationship",
                    "title": "What is your current relationship status?",
                    "isRequired": true,
                    "choices": [{
                        "value": "Single/Never married",
                        "text": "Single/Never married"
                    }, {
                        "value": "Married",
                        "text": "Married"
                    }, {
                        "value": "Separated",
                        "text": "Separated"
                    }, {
                        "value": "Divorced",
                        "text": "Divorced"
                    }, {
                        "value": "Widowed",
                        "text": "Widowed"
                    }, {
                        "value": "Living with partner (unmarried)",
                        "text": "Living with partner (unmarried)"
                    }, {
                        "value": "Prefer not to answer",
                        "text": "Prefer not to answer"
                    }],
                    "showOtherItem": true
                }]
            }, {
                "name": "page9",
                "elements": [{
                    "type": "dropdown",
                    "name": "question10_children",
                    "title": "How many biological children do you have?",
                    "isRequired": true,
                    "choices": [{
                        "value": "0",
                        "text": "0"
                    }, {
                        "value": "1",
                        "text": "1"
                    }, {
                        "value": "2",
                        "text": "2"
                    }, {
                        "value": "3",
                        "text": "3"
                    }, {
                        "value": "4",
                        "text": "4"
                    }, {
                        "value": "5",
                        "text": "5"
                    }, {
                        "value": "6",
                        "text": "6"
                    }, {
                        "value": "7",
                        "text": "7"
                    }, {
                        "value": "8",
                        "text": "8"
                    }, {
                        "value": "9",
                        "text": "9"
                    }, {
                        "value": "10+",
                        "text": "10+"
                    }]
                }]
            }, {
                "name": "page10",
                "elements": [{
                    "type": "dropdown",
                    "name": "question11_step-adopted",
                    "title": "How many stepchildren or adopted children do you have?",
                    "isRequired": true,
                    "choices": [{
                        "value": "0",
                        "text": "0"
                    }, {
                        "value": "1",
                        "text": "1"
                    }, {
                        "value": "2",
                        "text": "2"
                    }, {
                        "value": "3",
                        "text": "3"
                    }, {
                        "value": "4",
                        "text": "4"
                    }, {
                        "value": "5",
                        "text": "5"
                    }, {
                        "value": "6",
                        "text": "6"
                    }, {
                        "value": "7",
                        "text": "7"
                    }, {
                        "value": "8",
                        "text": "8"
                    }, {
                        "value": "9",
                        "text": "9"
                    }, {
                        "value": "10+",
                        "text": "10+"
                    }]
                }]
            }, {
                "name": "page11",
                "elements": [{
                    "type": "radiogroup",
                    "name": "question12_home",
                    "title": "What describes the building you currently live in?",
                    "isRequired": true,
                    "choices": [{
                        "value": "Mobile Home",
                        "text": "Mobile home"
                    }, {
                        "value": "One-family house detached from any other house",
                        "text": "One-family house detached from any other house"
                    }, {
                        "value": "One-family house attached to one or more houses",
                        "text": "One-family house attached to one or more houses"
                    }, {
                        "value": "Building with 2 or more apartments",
                        "text": "Building with 2 or more apartments"
                    }, {
                        "value": "Boat, RV, van, etc.",
                        "text": "Boat, RV, van, etc."
                    }],
                    "showOtherItem": true,
                    "showNoneItem": true
                }]
            }, {
                "name": "page12",
                "elements": [{
                    "type": "radiogroup",
                    "name": "question13_education",
                    "title": "What is the highest level of education or schooling you have completed or the highest degree you have received?",
                    "isRequired": true,
                    "choices": [{
                        "value": "Never attended/Kindergarten only",
                        "text": "Never attended/Kindergarten only"
                    }, {
                        "value": "Grade 1",
                        "text": "Grade 1"
                    }, {
                        "value": "Grade 2",
                        "text": "Grade 2"
                    }, {
                        "value": "Grade 3",
                        "text": "Grade 3"
                    }, {
                        "value": "Grade 4",
                        "text": "Grade 4"
                    }, {
                        "value": "Grade 5",
                        "text": "Grade 5"
                    }, {
                        "value": "Grade 6",
                        "text": "Grade 6"
                    }, {
                        "value": "Grade 7",
                        "text": "Grade 7"
                    }, {
                        "value": "Grade 8",
                        "text": "Grade 8"
                    }, {
                        "value": "Grade 9",
                        "text": "Grade 9"
                    }, {
                        "value": "Grade 10",
                        "text": "Grade 10"
                    }, {
                        "value": "Grade 11",
                        "text": "Grade 11"
                    }, {
                        "value": "Grade 12, no diploma",
                        "text": "Grade 12, no diploma"
                    }, {
                        "value": "High school graduate",
                        "text": "High school graduate"
                    }, {
                        "value": "GED or equivalent",
                        "text": "GED or equivalent"
                    }, {
                        "value": "Some college, no degree",
                        "text": "Some college, no degree"
                    }, {
                        "value": "Associate degree: occupational, technical, or vocational program",
                        "text": "Associate degree: occupational, technical, or vocational program"
                    }, {
                        "value": "Associate degree: academic program",
                        "text": "Associate degree: academic program"
                    }, {
                        "value": "Bachelor's degree (examples: BA, BS, AB, BBA)",
                        "text": "Bachelor's degree (examples: BA, BS, AB, BBA)"
                    }, {
                        "value": "Master's degree (examples: MS, MA, MBA, MEd, MEng)",
                        "text": "Master's degree (examples: MS, MA, MBA, MEd, MEng)"
                    }, {
                        "value": "Professional school degree (examples: MD, JD, DDS, DVM)",
                        "text": "Professional school degree (examples: MD, JD, DDS, DVM)"
                    }, {
                        "value": "Doctoral degree (examples: PhD, EdD)",
                        "text": "Doctoral degree (examples: PhD, EdD)"
                    }, {
                        "value": "Prefer not to say",
                        "text": "Prefer not to say"
                    }, {
                        "value": "I don't know",
                        "text": "I don't know"
                    }],
                    "showOtherItem": true
                }]
            }, {
                "name": "page13",
                "elements": [{
                    "type": "radiogroup",
                    "name": "question16_employed",
                    "title": "What is your employment status?",
                    "isRequired": true,
                    "choices": [{
                        "value": "Full-Time Employed",
                        "text": "Full-Time Employed"
                    }, {
                        "value": "Part-Time Employed",
                        "text": "Part-Time Employed"
                    }, {
                        "value": "Unemployed",
                        "text": "Unemployed"
                    }, {
                        "value": "Prefer not to answer",
                        "text": "Prefer not to answer"
                    }],
                    "showOtherItem": true
                }]
            }, {
                "name": "page14",
                "elements": [{
                    "type": "radiogroup",
                    "name": "question14_employment",
                    "visibleIf": "{question16_employed} = 'Full-Time Employed' or {question16_employed} = 'Part-Time Employed'",
                    "title": "What kind of work do you normally do?",
                    "isRequired": true,
                    "choices": [{
                        "value": "Entertainment/Performing",
                        "text": "Entertainment/Performing"
                    }, {
                        "value": "Management (corporate or general)",
                        "text": "Management (corporate or general)"
                    }, {
                        "value": "Education",
                        "text": "Education"
                    }, {
                        "value": "Sales/Demonstrater",
                        "text": "Sales/Demonstrater"
                    }, {
                        "value": "Manual labor",
                        "text": "Manual labor"
                    }, {
                        "value": "Law enforcement/Armed forces",
                        "text": "Law enforcement/Armed forces"
                    }, {
                        "value": "Healthcare/Life sciences",
                        "text": "Healthcare/Life sciences"
                    }, {
                        "value": "Physics/Mathematics/Engineering",
                        "text": "Physics/Mathematics/Engineering"
                    }, {
                        "value": "Agriculture/Fishery",
                        "text": "Agriculture/Fishery"
                    }, {
                        "value": "Machine operation/assembly",
                        "text": "Machine operation/assembly"
                    }],
                    "showOtherItem": true
                }]
            }, {
                "name": "page15",
                "elements": [{
                    "type": "radiogroup",
                    "name": "question17_unemployment",
                    "visibleIf": "{question16_employed} = 'Unemployed'",
                    "title": "What is your unemployment status?",
                    "isRequired": true,
                    "choices": [{
                        "value": "Unemployed (on disability)",
                        "text": "Unemployed (on disability)"
                    }, {
                        "value": "Unemployed (not on disability)",
                        "text": "Unemployed (not on disability)"
                    }, {
                        "value": "Prefer not to say",
                        "text": "Prefer not to say"
                    }]
                }]
            }, {
                "name": "page16",
                "elements": [{
                    "type": "checkbox",
                    "name": "question18_conditions",
                    "title": "Do you have any of the following conditions? (Select all that apply)",
                    "isRequired": true,
                    "choices": [{
                        "value": "ADD/ADHD",
                        "text": "ADD/ADHD"
                    }, {
                        "value": "Blindness/Low vision",
                        "text": "Blindness/Low vision"
                    }, {
                        "value": "Brain injury",
                        "text": "Brain injury"
                    }, {
                        "value": "Deaf/Hard of hearing",
                        "text": "Deaf/Hard of hearing"
                    }, {
                        "value": "Learning disability",
                        "text": "Learning disability"
                    }, {
                        "value": "Medical disability (examples: cancer, chronic fatigue, diabetes)",
                        "text": "Medical disability (examples: cancer, chronic fatigue, diabetes)"
                    }, {
                        "value": "Physical disability (examples: cerebral palsy, amputation, cardiac conditions)",
                        "text": "Physical disability (examples: cerebral palsy, amputation, cardiac conditions)"
                    }, {
                        "value": "Speech and language disability",
                        "text": "Speech and language disability"
                    }, {
                        "value": "Prefer not to say",
                        "text": "Prefer not to say"
                    }, {
                        "value": "No",
                        "text": "No"
                    }],
                    "showOtherItem": true,
                    "showNoneItem": true,
                    "showSelectAllItem": true
                }]
            }],
            "showTitle": false
        }
        
        window.survey = new Survey.Model(json);


        // Recor the response time or how long they spent on a page
        lastpage = survey.currentPage;
        function timerLoop(elapsed) {
            var page = survey.currentPage; // page variable is the currentPage on the survey
            if (!page) return;
            if (lastpage != page) {
                // set new start date
                start = new Date().getTime(); // sets new start Date object when page has changed.
                lastpage = page // sets the last page to currente page 

            }
            var valueName = "TRQ" + survey.pages.indexOf(page);

            var ms = survey.getValue(valueName); // gets the value of the valuename. e.g: TRQ1

            if (ms == null) ms = 0;
            else ms = elapsed;
            survey.setValue(valueName, ms);
            $('#timeEl').text(elapsed + ' ms');
        }


        function getQueryVariable(variable) {
            var query = window.location.search.substring(1);
            var vars = query.split('&');
            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split('=');
                if (decodeURIComponent(pair[0]) == variable) {
                    return decodeURIComponent(pair[1]);
                }
            }
            return 'NULL'
        }

        survey.showProgressBar = "bottom";

        survey.goNextPageAutomatic = false
        survey.showNavigationButtons = true;
        survey.showCompletedPage = false;

        // Get Query Variables
        var surveyname = getQueryVariable('survey');

        var expInfo = { 'participant': '' ,'session': '',  'task': surveyname, 'date' : formatDate(), 'study': '', 'id': getQueryVariable('id') };

        // Get info Promize
        const getInfoPromise = new Promise((resolve, reject) => {
            $.ajax({
                type: "POST",
                url: '/getInfo',
                data: { 'id': expInfo.id },
                dataType: 'JSON',
                success: function (data) {
                    resolve(data)
                }
            })
        })
            // Read getINFO 
            .then((values) => {
                console.log(values)
                if (values.subject && values.session && values.study) {
                    expInfo.participant = values.subject
                    expInfo.study = values.study
                    expInfo.session = values.session
                    expInfo.run_id = getQueryVariable('run')
                }

                survey.onComplete.add(function (result) {
                    //result.preventDefault();
                    postSurveyData(result.data, expInfo.session, expInfo.participant);
                });

                $("#surveyElement").Survey({model: survey});
    
                $("#participant").text(expInfo.participant);
                $("#session").text(expInfo.session);
                $("#study").text(expInfo.study);

            })

        function postSurveyData(data, session, mkturkid) {
            
            $.ajax({
                type: "POST",
                url: '/save',
                data: {
                    "trials_data": data,
                    "expInfo": expInfo
                },
                dataType: 'JSON',
                statusCode: {
                    200: function() {
                        console.log('sucess saved on backend')
                        window.location.replace('/link?id=' + expInfo.id  + '&index=' + (parseInt(getQueryVariable('index')) + 1))
                    }
                }
            }) 
                
        }

        var start = new Date().getTime(),
            elapsed = '0.0';

        // executes timerCallback every 100 ms
        timerID = window.setInterval(function () {

            var time = new Date().getTime() - start;
            elapsed = Math.floor(time);

            //alert(elapsed);
            //$('#timeEl').text(elapsed + ' ms');

            //displayTime(1);
            timerLoop(elapsed);

        }, 5);
    </script>

</body>

</html>
