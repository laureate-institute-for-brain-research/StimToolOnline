<!DOCTYPE html>
<html lang="en">

<head>
    <style type="text/css">
        @font-face {
            font-family: gotham;
            src: url(/gotham-book-regular.otf);
        }

        * {
            font-family: Helvetica Neue;
        }

        a:link,
        a:visited {
            color: #5e3f99;
        }

        input[type=text]:focus {
            border-color: #f68826;
            box-shadow: 0 0 5px #f68826 !important;
        }

        input[type=email]:focus {
            border-color: #f68826;
            box-shadow: 0 0 5px #f68826 !important;
        }

        .sv-root-modern .sv-container-modern {
            color: white !important;
            fill: white !important;
        }
        .sv-radio__svg {
            border-color: white !important;
        }

        .sv-root-modern .sv-radio--checked .sv-radio__svg  {
            fill: white !important;
        }

        .sv-root-modern input.sv-text, textarea.sv-comment, select.sv-dropdown{
            color: white !important;
        }
        
    </style>
    <title>Demographics Survey</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>

    <!-- Latest compiled and minified CSS -->
    <!-- Using Bootsawtch theme: https://bootswatch.com/cyborg/ -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">


    <!-- Latest compiled and minified JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>

    <link href="https://unpkg.com/survey-knockout@1.8.41/modern.css" type="text/css" rel="stylesheet"/>
    <script src="https://unpkg.com/jquery"></script>
    <script src="https://unpkg.com/survey-jquery@1.8.41/survey.jquery.min.js"></script>

    <script type="text/javascript" src='/js/StimToolLib.js'></script>

</head>

<body>

    <div class="container" style="max-width: 400px;">
        <div class="py-5 text-center">
            <img class="d-block mx-auto mb-4" src="/images/logo_reversed.jpg" alt="" width="180" height="50">
            <h4>Demographics Survey</h4>
          </div>
    </div>

    <!-- <center id="welcome_message" style="visibility: hidden">
        <h1>Welcome Back!</h1>
        <p>Please continue to with session 2!</p>
    </center> -->
    <!-- Modal -->
    <div class="modal fade" id="welcome_message" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
            <h1 class="modal-title" id="exampleModalLabel">Welcome Back!</h1>
            </div>
            <div class="modal-body">
            <p>You're almost done! For session 2, you will complete the same surveys and task as session 1.<br><br>
                After the task portion, you will complete a feedback survey and then recieve a code to submit on MTURK.
            </p>
            </div>
            <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
        </div>
    </div>

    <div class="container" style="max-width: 400px;">
        <div class="row" >
            <div id="surveyElement" style="margin-bottom:40px"></div>
            
            <div id="surveyResult"></div>
        </div>
    </div>

    <div class="jumbotron container" style="margin-bottom:0;max-width: 400px;">
        <table class="table table-hover">
            <tbody>
                <tr>
                  <th scope="row">ID:</th>
                  <td><a id="participant"></a></td>
                </tr>
                <tr>
                    <th scope="row">Session:</th>
                    <td><a id="session"></a></td>
                  </tr>
                  <tr>
                    <th scope="row">Study:</th>
                    <td><a id="study"></a></td>
                  </tr>
              </tbody>
        </table>
        <p style="text-align: center;">&copy; 2021 <a href="http://www.laureateinstitute.org">laureateinstitute.org</a>. All rights reserved.</p>
    </div>

    <script type="text/javascript">

        Survey
            .StylesManager
            .applyTheme("modern");
        // Survey.Survey.cssType = "bootstrap";
        // Survey.defaultBootstrapCss.navigationButton = "btn";
        var json = {
            "title": "Demographic Survey",
            "description": "MTurk demographic survey for Well-Being",
            "logoPosition": "right",
            "pages": [{
                "name": "page1",
                "elements": [{
                    "type": "radiogroup",
                    "name": "question1",
                    "title": "What is your sex assigned at birth?",
                    "isRequired": true,
                    "choices": [{
                        "value": "item1",
                        "text": "Female"
                    }, {
                        "value": "item2",
                        "text": "Male"
                    }, {
                        "value": "item3",
                        "text": "Intersex/Other"
                    }]
                }]
            }, {
                "name": "page2",
                "elements": [{
                    "type": "radiogroup",
                    "name": "question2",
                    "title": "What is your gender identity?",
                    "isRequired": true,
                    "choices": [{
                        "value": "item1",
                        "text": "Cisgender Woman"
                    }, {
                        "value": "item2",
                        "text": "Cisgender Man"
                    }, {
                        "value": "item3",
                        "text": "Transgender Woman"
                    }, {
                        "value": "item4",
                        "text": "Transgender Man"
                    }, {
                        "value": "item5",
                        "text": "Non-binary"
                    }, {
                        "value": "item6",
                        "text": "Genderqueer/Gender nonconforming"
                    }, {
                        "value": "item7",
                        "text": "Prefer not to say"
                    }],
                    "showOtherItem": true
                }]
            }, {
                "name": "page3",
                "elements": [{
                    "type": "radiogroup",
                    "name": "question15",
                    "title": "What is your sexual orientation?",
                    "isRequired": true,
                    "choices": [{
                        "value": "item1",
                        "text": "Asexual"
                    }, {
                        "value": "item2",
                        "text": "Bisexual"
                    }, {
                        "value": "item3",
                        "text": "Demisexual"
                    }, {
                        "value": "item4",
                        "text": "Gay/Lesbian"
                    }, {
                        "value": "item5",
                        "text": "Heterosexual/Straight"
                    }, {
                        "value": "item6",
                        "text": "Pansexual"
                    }, {
                        "value": "item7",
                        "text": "Prefer not to say"
                    }],
                    "showOtherItem": true
                }]
            }, {
                "name": "page4",
                "elements": [{
                    "type": "text",
                    "name": "question3",
                    "title": "What is your current age (in years)?",
                    "isRequired": true,
                    "inputType": "number",
                    "min": 0,
                    "max": 99
                }]
            }, {
                "name": "page5",
                "elements": [{
                    "type": "dropdown",
                    "name": "question4",
                    "title": "Select the country you live in:",
                    "isRequired": true,
                    "choices": [{
                        "value": "item1",
                        "text": "Afghanistan"
                    }, {
                        "value": "item2",
                        "text": "Albania"
                    }, {
                        "value": "item3",
                        "text": "Algeria"
                    }, {
                        "value": "item4",
                        "text": "Andorra"
                    }, {
                        "value": "item5",
                        "text": "Angola"
                    }, {
                        "value": "item6",
                        "text": "Antigua & Deps"
                    }, {
                        "value": "item7",
                        "text": "Argentina"
                    }, {
                        "value": "item8",
                        "text": "Armenia"
                    }, {
                        "value": "item9",
                        "text": "Australia"
                    }, {
                        "value": "item10",
                        "text": "Austria"
                    }, {
                        "value": "item11",
                        "text": "Azerbaijan"
                    }, {
                        "value": "item12",
                        "text": "Bahamas"
                    }, {
                        "value": "item13",
                        "text": "Bahrain"
                    }, {
                        "value": "item14",
                        "text": "Bangladesh"
                    }, {
                        "value": "item15",
                        "text": "Barbados"
                    }, {
                        "value": "item16",
                        "text": "Belarus"
                    }, {
                        "value": "item17",
                        "text": "Belgium"
                    }, {
                        "value": "item18",
                        "text": "Belize"
                    }, {
                        "value": "item19",
                        "text": "Benin"
                    }, {
                        "value": "item20",
                        "text": "Bhutan"
                    }, {
                        "value": "item21",
                        "text": "Bolivia"
                    }, {
                        "value": "item22",
                        "text": "Bosnia Herzegovina"
                    }, {
                        "value": "item23",
                        "text": "Botswana"
                    }, {
                        "value": "item24",
                        "text": "Brazil"
                    }, {
                        "value": "item25",
                        "text": "Brunei"
                    }, {
                        "value": "item26",
                        "text": "Bulgaria"
                    }, {
                        "value": "item27",
                        "text": "Burkina"
                    }, {
                        "value": "item28",
                        "text": "Burundi"
                    }, {
                        "value": "item29",
                        "text": "Cambodia"
                    }, {
                        "value": "item30",
                        "text": "Cameroon"
                    }, {
                        "value": "item31",
                        "text": "Canada"
                    }, {
                        "value": "item32",
                        "text": "Cape Verde"
                    }, {
                        "value": "item33",
                        "text": "Central African Rep"
                    }, {
                        "value": "item34",
                        "text": "Chad"
                    }, {
                        "value": "item35",
                        "text": "Chile"
                    }, {
                        "value": "item36",
                        "text": "China"
                    }, {
                        "value": "item37",
                        "text": "Colombia"
                    }, {
                        "value": "item38",
                        "text": "Comoros"
                    }, {
                        "value": "item39",
                        "text": "Congo"
                    }, {
                        "value": "item40",
                        "text": "Congo {Democratic Rep}"
                    }, {
                        "value": "item41",
                        "text": "Costa Rica"
                    }, {
                        "value": "item42",
                        "text": "Croatia"
                    }, {
                        "value": "item43",
                        "text": "Cuba"
                    }, {
                        "value": "item44",
                        "text": "Cyprus"
                    }, {
                        "value": "item45",
                        "text": "Czech Republic"
                    }, {
                        "value": "item46",
                        "text": "Denmark"
                    }, {
                        "value": "item47",
                        "text": "Djibouti"
                    }, {
                        "value": "item48",
                        "text": "Dominica"
                    }, {
                        "value": "item49",
                        "text": "Dominican Republic"
                    }, {
                        "value": "item50",
                        "text": "East Timor"
                    }, {
                        "value": "item51",
                        "text": "Ecuador"
                    }, {
                        "value": "item52",
                        "text": "Egypt"
                    }, {
                        "value": "item53",
                        "text": "El Salvador"
                    }, {
                        "value": "item54",
                        "text": "Equatorial Guinea"
                    }, {
                        "value": "item55",
                        "text": "Eritrea"
                    }, {
                        "value": "item56",
                        "text": "Estonia"
                    }, {
                        "value": "item57",
                        "text": "Ethiopia"
                    }, {
                        "value": "item58",
                        "text": "Fiji"
                    }, {
                        "value": "item59",
                        "text": "Finland"
                    }, {
                        "value": "item60",
                        "text": "France"
                    }, {
                        "value": "item61",
                        "text": "Gabon"
                    }, {
                        "value": "item62",
                        "text": "Gambia"
                    }, {
                        "value": "item63",
                        "text": "Georgia"
                    }, {
                        "value": "item64",
                        "text": "Germany"
                    }, {
                        "value": "item65",
                        "text": "Ghana"
                    }, {
                        "value": "item66",
                        "text": "Greece"
                    }, {
                        "value": "item67",
                        "text": "Grenada"
                    }, {
                        "value": "item68",
                        "text": "Guatemala"
                    }, {
                        "value": "item69",
                        "text": "Guinea"
                    }, {
                        "value": "item70",
                        "text": "Guinea-Bissau"
                    }, {
                        "value": "item71",
                        "text": "Guyana"
                    }, {
                        "value": "item72",
                        "text": "Haiti"
                    }, {
                        "value": "item73",
                        "text": "Honduras"
                    }, {
                        "value": "item74",
                        "text": "Hungary"
                    }, {
                        "value": "item75",
                        "text": "Iceland"
                    }, {
                        "value": "item76",
                        "text": "India"
                    }, {
                        "value": "item77",
                        "text": "Indonesia"
                    }, {
                        "value": "item78",
                        "text": "Iran"
                    }, {
                        "value": "item79",
                        "text": "Iraq"
                    }, {
                        "value": "item80",
                        "text": "Ireland {Republic}"
                    }, {
                        "value": "item81",
                        "text": "Israel"
                    }, {
                        "value": "item82",
                        "text": "Italy"
                    }, {
                        "value": "item83",
                        "text": "Ivory Coast"
                    }, {
                        "value": "item84",
                        "text": "Jamaica"
                    }, {
                        "value": "item85",
                        "text": "Japan"
                    }, {
                        "value": "item86",
                        "text": "Jordan"
                    }, {
                        "value": "item87",
                        "text": "Kazakhstan"
                    }, {
                        "value": "item88",
                        "text": "Kenya"
                    }, {
                        "value": "item89",
                        "text": "Kiribati"
                    }, {
                        "value": "item90",
                        "text": "Korea North"
                    }, {
                        "value": "item91",
                        "text": "Korea South"
                    }, {
                        "value": "item92",
                        "text": "Kosovo"
                    }, {
                        "value": "item93",
                        "text": "Kuwait"
                    }, {
                        "value": "item94",
                        "text": "Kyrgyzstan"
                    }, {
                        "value": "item95",
                        "text": "Laos"
                    }, {
                        "value": "item96",
                        "text": "Latvia"
                    }, {
                        "value": "item97",
                        "text": "Lebanon"
                    }, {
                        "value": "item98",
                        "text": "Lesotho"
                    }, {
                        "value": "item99",
                        "text": "Liberia"
                    }, {
                        "value": "item100",
                        "text": "Libya"
                    }, {
                        "value": "item101",
                        "text": "Liechtenstein"
                    }, {
                        "value": "item102",
                        "text": "Lithuania"
                    }, {
                        "value": "item103",
                        "text": "Luxembourg"
                    }, {
                        "value": "item104",
                        "text": "Macedonia"
                    }, {
                        "value": "item105",
                        "text": "Madagascar"
                    }, {
                        "value": "item106",
                        "text": "Malawi"
                    }, {
                        "value": "item107",
                        "text": "Malaysia"
                    }, {
                        "value": "item108",
                        "text": "Maldives"
                    }, {
                        "value": "item109",
                        "text": "Mali"
                    }, {
                        "value": "item110",
                        "text": "Malta"
                    }, {
                        "value": "item111",
                        "text": "Marshall Islands"
                    }, {
                        "value": "item112",
                        "text": "Mauritania"
                    }, {
                        "value": "item113",
                        "text": "Mauritius"
                    }, {
                        "value": "item114",
                        "text": "Mexico"
                    }, {
                        "value": "item115",
                        "text": "Micronesia"
                    }, {
                        "value": "item116",
                        "text": "Moldova"
                    }, {
                        "value": "item117",
                        "text": "Monaco"
                    }, {
                        "value": "item118",
                        "text": "Mongolia"
                    }, {
                        "value": "item119",
                        "text": "Montenegro"
                    }, {
                        "value": "item120",
                        "text": "Morocco"
                    }, {
                        "value": "item121",
                        "text": "Mozambique"
                    }, {
                        "value": "item122",
                        "text": "Myanmar, {Burma}"
                    }, {
                        "value": "item123",
                        "text": "Namibia"
                    }, {
                        "value": "item124",
                        "text": "Nauru"
                    }, {
                        "value": "item125",
                        "text": "Nepal"
                    }, {
                        "value": "item126",
                        "text": "Netherlands"
                    }, {
                        "value": "item127",
                        "text": "New Zealand"
                    }, {
                        "value": "item128",
                        "text": "Nicaragua"
                    }, {
                        "value": "item129",
                        "text": "Niger"
                    }, {
                        "value": "item130",
                        "text": "Nigeria"
                    }, {
                        "value": "item131",
                        "text": "Norway"
                    }, {
                        "value": "item132",
                        "text": "Oman"
                    }, {
                        "value": "item133",
                        "text": "Pakistan"
                    }, {
                        "value": "item134",
                        "text": "Palau"
                    }, {
                        "value": "item135",
                        "text": "Panama"
                    }, {
                        "value": "item136",
                        "text": "Papua New Guinea"
                    }, {
                        "value": "item137",
                        "text": "Paraguay"
                    }, {
                        "value": "item138",
                        "text": "Peru"
                    }, {
                        "value": "item139",
                        "text": "Philippines"
                    }, {
                        "value": "item140",
                        "text": "Poland"
                    }, {
                        "value": "item141",
                        "text": "Portugal"
                    }, {
                        "value": "item142",
                        "text": "Qatar"
                    }, {
                        "value": "item143",
                        "text": "Romania"
                    }, {
                        "value": "item144",
                        "text": "Russian Federation"
                    }, {
                        "value": "item145",
                        "text": "Rwanda"
                    }, {
                        "value": "item146",
                        "text": "St Kitts & Nevis"
                    }, {
                        "value": "item147",
                        "text": "St Lucia"
                    }, {
                        "value": "item148",
                        "text": "Saint Vincent & the Grenadines"
                    }, {
                        "value": "item149",
                        "text": "Samoa"
                    }, {
                        "value": "item150",
                        "text": "San Marino"
                    }, {
                        "value": "item151",
                        "text": "Sao Tome & Principe"
                    }, {
                        "value": "item152",
                        "text": "Saudi Arabia"
                    }, {
                        "value": "item153",
                        "text": "Senegal"
                    }, {
                        "value": "item154",
                        "text": "Serbia"
                    }, {
                        "value": "item155",
                        "text": "Seychelles"
                    }, {
                        "value": "item156",
                        "text": "Sierra Leone"
                    }, {
                        "value": "item157",
                        "text": "Singapore"
                    }, {
                        "value": "item158",
                        "text": "Slovakia"
                    }, {
                        "value": "item159",
                        "text": "Slovenia"
                    }, {
                        "value": "item160",
                        "text": "Solomon Islands"
                    }, {
                        "value": "item161",
                        "text": "Somalia"
                    }, {
                        "value": "item162",
                        "text": "South Africa"
                    }, {
                        "value": "item163",
                        "text": "South Sudan"
                    }, {
                        "value": "item164",
                        "text": "Spain"
                    }, {
                        "value": "item165",
                        "text": "Sri Lanka"
                    }, {
                        "value": "item166",
                        "text": "Sudan"
                    }, {
                        "value": "item167",
                        "text": "Suriname"
                    }, {
                        "value": "item168",
                        "text": "Swaziland"
                    }, {
                        "value": "item169",
                        "text": "Sweden"
                    }, {
                        "value": "item170",
                        "text": "Switzerland"
                    }, {
                        "value": "item171",
                        "text": "Syria"
                    }, {
                        "value": "item172",
                        "text": "Taiwan"
                    }, {
                        "value": "item173",
                        "text": "Tajikistan"
                    }, {
                        "value": "item174",
                        "text": "Tanzania"
                    }, {
                        "value": "item175",
                        "text": "Thailand"
                    }, {
                        "value": "item176",
                        "text": "Togo"
                    }, {
                        "value": "item177",
                        "text": "Tonga"
                    }, {
                        "value": "item178",
                        "text": "Trinidad & Tobago"
                    }, {
                        "value": "item179",
                        "text": "Tunisia"
                    }, {
                        "value": "item180",
                        "text": "Turkey"
                    }, {
                        "value": "item181",
                        "text": "Turkmenistan"
                    }, {
                        "value": "item182",
                        "text": "Tuvalu"
                    }, {
                        "value": "item183",
                        "text": "Uganda"
                    }, {
                        "value": "item184",
                        "text": "Ukraine"
                    }, {
                        "value": "item185",
                        "text": "United Arab Emirates"
                    }, {
                        "value": "item186",
                        "text": "United Kingdom"
                    }, {
                        "value": "item187",
                        "text": "United States"
                    }, {
                        "value": "item188",
                        "text": "Uruguay"
                    }, {
                        "value": "item189",
                        "text": "Uzbekistan"
                    }, {
                        "value": "item190",
                        "text": "Vanuatu"
                    }, {
                        "value": "item191",
                        "text": "Vatican City"
                    }, {
                        "value": "item192",
                        "text": "Venezuela"
                    }, {
                        "value": "item193",
                        "text": "Vietnam"
                    }, {
                        "value": "item194",
                        "text": "Yemen"
                    }, {
                        "value": "item195",
                        "text": "Zambia"
                    }, {
                        "value": "item196",
                        "text": "Zimbabwe"
                    }]
                }]
            }, {
                "name": "page6",
                "elements": [{
                    "type": "checkbox",
                    "name": "question6",
                    "title": "What is your race? Please select one or more of these options:",
                    "isRequired": true,
                    "choices": [{
                        "value": "item1",
                        "text": "Asian"
                    }, {
                        "value": "item2",
                        "text": "Black/African American"
                    }, {
                        "value": "item3",
                        "text": "American Indian/Alaskan Native"
                    }, {
                        "value": "item6",
                        "text": "Native Hawaiian/Pacific Islander"
                    }, {
                        "value": "item5",
                        "text": "White"
                    }, {
                        "value": "item7",
                        "text": "Prefer not to answer"
                    }, {
                        "value": "item8",
                        "text": "I don't know"
                    }],
                    "showOtherItem": true
                }, {
                    "type": "radiogroup",
                    "name": "question5",
                    "title": "Are you Hispanic/Latinx [where did your ancestors come from]?",
                    "isRequired": true,
                    "choices": [{
                        "value": "item1",
                        "text": "Yes"
                    }, {
                        "value": "item2",
                        "text": "No"
                    }, {
                        "value": "item3",
                        "text": "Prefer not to say"
                    }, {
                        "value": "item4",
                        "text": "I don't know"
                    }]
                }]
            }, {
                "name": "page7",
                "elements": [{
                    "type": "radiogroup",
                    "name": "question7",
                    "title": "Is English your primary language?",
                    "isRequired": true,
                    "choices": [{
                        "value": "item1",
                        "text": "Yes"
                    }, {
                        "value": "item2",
                        "text": "No"
                    }]
                }, {
                 "type": "dropdown",
                 "name": "primaryLang",
                 "title": "Primary Language",
                 "visibleIf":"{question7} = 'item2'",
                 "requiredIf": "{question7} = 'item2'",
                 "choices": [
                  {
                   "value": "Item 1",
                   "text": "English"
                  },
                  {
                   "value": "Item 2",
                   "text": "Mandarin"
                  },
                  {
                   "value": "Item 3",
                   "text": "Spanish"
                  },
                  {
                   "value": "Item 4",
                   "text": "Hindi"
                  },
                  {
                   "value": "Item 5",
                   "text": "Portuguese"
                  },
                  {
                   "value": "Item 6",
                   "text": "Bengali"
                  },
                  {
                   "value": "Item 7",
                   "text": "Russian"
                  },
                  {
                   "value": "Item 8",
                   "text": "Japanese"
                  },
                  {
                   "value": "Item 9",
                   "text": "Vietnamese"
                  },
                  {
                   "value": "Item 10",
                   "text": "Turkish"
                  },
                  {
                   "value": "Item 11",
                   "text": "Marathi"
                  },
                  {
                   "value": "Item 12",
                   "text": "Telugu"
                  },
                  {
                   "value": "Item 13",
                   "text": "Korean"
                  },
                  {
                   "value": "Item 14",
                   "text": "French"
                  },
                  {
                   "value": "Item 15",
                   "text": "Tamil"
                  },
                  {
                   "value": "Item 16",
                   "text": "Arabic"
                  },
                  {
                   "value": "Item 17",
                   "text": "German"
                  },
                  {
                   "value": "Item 18",
                   "text": "Urdu"
                  },
                  {
                   "value": "Item 19",
                   "text": "Javanese"
                  },
                  {
                   "value": "Item 20",
                   "text": "Punjabi"
                  },
                  {
                   "value": "Item 21",
                   "text": "Italian"
                  },
                  {
                   "value": "Item 22",
                   "text": "Gujarati"
                  },
                  {
                   "value": "Item 23",
                   "text": "Iranian Persian"
                  },
                  {
                   "value": "Item 24",
                   "text": "Bhojpuri"
                  },
                  {
                   "value": "Item 25",
                   "text": "Hausa"
                  },
                  {
                   "value": "Item 26",
                   "text": "Other"
                  }
                 ]
                },
                {
                 "type": "text",
                 "name": "primaryLangOther",
                 "visibleIf": "{primaryLang} = 'Item 26'",
                 "requiredIf": "{primaryLang} = 'Item 26'",
                 "title": "Other Primary Language"
                }]
            }, {
                "name": "page8",
                "elements": [{
                    "type": "radiogroup",
                    "name": "question9",
                    "title": "What is your current relationship status?",
                    "isRequired": true,
                    "choices": [{
                        "value": "item1",
                        "text": "Single/Never married"
                    }, {
                        "value": "item2",
                        "text": "Married"
                    }, {
                        "value": "item3",
                        "text": "Separated"
                    }, {
                        "value": "item4",
                        "text": "Divorced"
                    }, {
                        "value": "item5",
                        "text": "Widowed"
                    }, {
                        "value": "item6",
                        "text": "Living with partner (unmarried)"
                    }, {
                        "value": "item7",
                        "text": "Prefer not to answer"
                    }],
                    "showOtherItem": true
                }]
            }, {
                "name": "page9",
                "elements": [{
                    "type": "dropdown",
                    "name": "question10",
                    "title": "How many biological children do you have?",
                    "isRequired": true,
                    "choices": [{
                        "value": "item1",
                        "text": "0"
                    }, {
                        "value": "item2",
                        "text": "1"
                    }, {
                        "value": "item3",
                        "text": "2"
                    }, {
                        "value": "item4",
                        "text": "3"
                    }, {
                        "value": "item5",
                        "text": "4"
                    }, {
                        "value": "item6",
                        "text": "5"
                    }, {
                        "value": "item7",
                        "text": "6"
                    }, {
                        "value": "item8",
                        "text": "7"
                    }, {
                        "value": "item9",
                        "text": "8"
                    }, {
                        "value": "item10",
                        "text": "9"
                    }, {
                        "value": "item11",
                        "text": "10+"
                    }]
                }]
            }, {
                "name": "page10",
                "elements": [{
                    "type": "dropdown",
                    "name": "question11",
                    "title": "How many stepchildren or adopted children do you have?",
                    "isRequired": true,
                    "choices": [{
                        "value": "item1",
                        "text": "0"
                    }, {
                        "value": "item2",
                        "text": "1"
                    }, {
                        "value": "item3",
                        "text": "2"
                    }, {
                        "value": "item4",
                        "text": "3"
                    }, {
                        "value": "item5",
                        "text": "4"
                    }, {
                        "value": "item6",
                        "text": "5"
                    }, {
                        "value": "item7",
                        "text": "6"
                    }, {
                        "value": "item8",
                        "text": "7"
                    }, {
                        "value": "item9",
                        "text": "8"
                    }, {
                        "value": "item10",
                        "text": "9"
                    }, {
                        "value": "item11",
                        "text": "10+"
                    }]
                }]
            }, {
                "name": "page11",
                "elements": [{
                    "type": "radiogroup",
                    "name": "question12",
                    "title": "What describes the building you currently live in?",
                    "isRequired": true,
                    "choices": [{
                        "value": "item1",
                        "text": "Mobile home"
                    }, {
                        "value": "item2",
                        "text": "One-family house detached from any other house"
                    }, {
                        "value": "item3",
                        "text": "One-family house attached to one or more houses"
                    }, {
                        "value": "item4",
                        "text": "Building with 2 or more apartments"
                    }, {
                        "value": "item5",
                        "text": "Boat, RV, van, etc."
                    }],
                    "showOtherItem": true,
                    "showNoneItem": true
                }]
            }, {
                "name": "page12",
                "elements": [{
                    "type": "radiogroup",
                    "name": "question13",
                    "title": "What is the highest level of education or schooling you have completed or the highest degree you have received?",
                    "isRequired": true,
                    "choices": [{
                        "value": "item1",
                        "text": "Never attended/Kindergarten only"
                    }, {
                        "value": "item2",
                        "text": "Grade 1"
                    }, {
                        "value": "item3",
                        "text": "Grade 2"
                    }, {
                        "value": "item4",
                        "text": "Grade 3"
                    }, {
                        "value": "item5",
                        "text": "Grade 4"
                    }, {
                        "value": "item6",
                        "text": "Grade 5"
                    }, {
                        "value": "item7",
                        "text": "Grade 6"
                    }, {
                        "value": "item8",
                        "text": "Grade 7"
                    }, {
                        "value": "item9",
                        "text": "Grade 8"
                    }, {
                        "value": "item10",
                        "text": "Grade 9"
                    }, {
                        "value": "item11",
                        "text": "Grade 10"
                    }, {
                        "value": "item12",
                        "text": "Grade 11"
                    }, {
                        "value": "item13",
                        "text": "Grade 12, no diploma"
                    }, {
                        "value": "item14",
                        "text": "High school graduate"
                    }, {
                        "value": "item15",
                        "text": "GED or equivalent"
                    }, {
                        "value": "item16",
                        "text": "Some college, no degree"
                    }, {
                        "value": "item17",
                        "text": "Associate degree: occupational, technical, or vocational program"
                    }, {
                        "value": "item18",
                        "text": "Associate degree: academic program"
                    }, {
                        "value": "item19",
                        "text": "Bachelor's degree (examples: BA, BS, AB, BBA)"
                    }, {
                        "value": "item20",
                        "text": "Master's degree (examples: MS, MA, MBA, MEd, MEng)"
                    }, {
                        "value": "item21",
                        "text": "Professional school degree (examples: MD, JD, DDS, DVM)"
                    }, {
                        "value": "item22",
                        "text": "Doctoral degree (examples: PhD, EdD)"
                    }, {
                        "value": "item23",
                        "text": "Prefer not to say"
                    }, {
                        "value": "item24",
                        "text": "I don't know"
                    }],
                    "showOtherItem": true
                }]
            }, {
                "name": "page13",
                "elements": [{
                    "type": "radiogroup",
                    "name": "question16",
                    "title": "What is your employment status?",
                    "isRequired": true,
                    "choices": [{
                        "value": "item1",
                        "text": "Full-Time Employed"
                    }, {
                        "value": "item2",
                        "text": "Part-Time Employed"
                    }, {
                        "value": "item3",
                        "text": "Unemployed"
                    }, {
                        "value": "item4",
                        "text": "Prefer not to answer"
                    }],
                    "showOtherItem": true
                }]
            }, {
                "name": "page14",
                "elements": [{
                    "type": "radiogroup",
                    "name": "question14",
                    "visibleIf": "{question16} = 'item1' or {question16} = 'item2'",
                    "title": "What kind of work do you normally do?",
                    "isRequired": true,
                    "choices": [{
                        "value": "item1",
                        "text": "Entertainment/Performing"
                    }, {
                        "value": "item2",
                        "text": "Management (corporate or general)"
                    }, {
                        "value": "item3",
                        "text": "Education"
                    }, {
                        "value": "item4",
                        "text": "Sales/Demonstrater"
                    }, {
                        "value": "item5",
                        "text": "Manual labor"
                    }, {
                        "value": "item6",
                        "text": "Law enforcement/Armed forces"
                    }, {
                        "value": "item7",
                        "text": "Healthcare/Life sciences"
                    }, {
                        "value": "item8",
                        "text": "Physics/Mathematics/Engineering"
                    }, {
                        "value": "item9",
                        "text": "Agriculture/Fishery"
                    }, {
                        "value": "item10",
                        "text": "Machine operation/assembly"
                    }],
                    "showOtherItem": true
                }]
            }, {
                "name": "page15",
                "elements": [{
                    "type": "radiogroup",
                    "name": "question17",
                    "visibleIf": "{question15.Row 3} = 'Column 1'",
                    "title": "What is your unemployment status?",
                    "isRequired": true,
                    "choices": [{
                        "value": "item1",
                        "text": "Unemployed (on disability)"
                    }, {
                        "value": "item2",
                        "text": "Unemployed (not on disability)"
                    }, {
                        "value": "item3",
                        "text": "Prefer not to say"
                    }]
                }]
            }, {
                "name": "page16",
                "elements": [{
                    "type": "checkbox",
                    "name": "question18",
                    "title": "Do you have any of the following conditions? (Select all that apply)",
                    "isRequired": true,
                    "choices": [{
                        "value": "item1",
                        "text": "ADD/ADHD"
                    }, {
                        "value": "item2",
                        "text": "Blindness/Low vision"
                    }, {
                        "value": "item3",
                        "text": "Brain injury"
                    }, {
                        "value": "item4",
                        "text": "Deaf/Hard of hearing"
                    }, {
                        "value": "item5",
                        "text": "Learning disability"
                    }, {
                        "value": "item6",
                        "text": "Medical disability (examples: cancer, chronic fatigue, diabetes)"
                    }, {
                        "value": "item7",
                        "text": "Physical disability (examples: cerebral palsy, amputation, cardiac conditions)"
                    }, {
                        "value": "item8",
                        "text": "Speech and language disability"
                    }, {
                        "value": "item9",
                        "text": "Prefer not to say"
                    }, {
                        "value": "item10",
                        "text": "No"
                    }],
                    "showOtherItem": true,
                    "showNoneItem": true,
                    "showSelectAllItem": true
                }]
            }],
            "showTitle": false
        }
        
        window.survey = new Survey.Model(json);


        // Recor the response time or how long they spent on a page
        lastpage = survey.currentPage;
        function timerLoop(elapsed) {
            var page = survey.currentPage; // page variable is the currentPage on the survey
            if (!page) return;
            if (lastpage != page) {
                // set new start date
                start = new Date().getTime(); // sets new start Date object when page has changed.
                lastpage = page // sets the last page to currente page 

            }
            var valueName = "TRQ" + survey.pages.indexOf(page);

            var ms = survey.getValue(valueName); // gets the value of the valuename. e.g: TRQ1

            if (ms == null) ms = 0;
            else ms = elapsed;
            survey.setValue(valueName, ms);
            $('#timeEl').text(elapsed + ' ms');
        }


        function getQueryVariable(variable) {
            var query = window.location.search.substring(1);
            var vars = query.split('&');
            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split('=');
                if (decodeURIComponent(pair[0]) == variable) {
                    return decodeURIComponent(pair[1]);
                }
            }
            return 'NULL'
        }

        survey.showProgressBar = "bottom";

        survey.goNextPageAutomatic = false
        survey.showNavigationButtons = true;
        survey.showCompletedPage = false;

        // Get Query Variables
        var surveyname = getQueryVariable('survey');

        var expInfo = { 'participant': '' ,'session': '',  'task': surveyname, 'date' : formatDate(), 'study': '', 'id': getQueryVariable('id') };

        // Get info Promize
        const getInfoPromise = new Promise((resolve, reject) => {
            $.ajax({
                type: "POST",
                url: '/getInfo',
                data: { 'id': expInfo.id },
                dataType: 'JSON',
                success: function (data) {
                    resolve(data)
                }
            })
        })
            // Read getINFO 
            .then((values) => {
                console.log(values)
                if (values.subject && values.session && values.study) {
                    expInfo.participant = values.subject
                    expInfo.study = values.study
                    expInfo.session = values.session
                    expInfo.run_id = getQueryVariable('run')
                }

                survey.onComplete.add(function (result) {
                    //result.preventDefault();
                    postSurveyData(result.data, expInfo.session, expInfo.participant);
                });

                $("#surveyElement").Survey({model: survey});
    
                $("#participant").text(expInfo.participant);
                $("#session").text(expInfo.session);
                $("#study").text(expInfo.study);

            })

        function postSurveyData(data, session, mkturkid) {
            
            $.ajax({
                type: "POST",
                url: '/save',
                data: {
                    "trials_data": data,
                    "expInfo": expInfo
                },
                dataType: 'JSON',
                statusCode: {
                    200: function() {
                        console.log('sucess saved on backend')
                        window.location.replace('/link?id=' + expInfo.id  + '&index=' + (parseInt(getQueryVariable('index')) + 1))
                    }
                }
            }) 
                
        }

        var start = new Date().getTime(),
            elapsed = '0.0';

        // executes timerCallback every 100 ms
        timerID = window.setInterval(function () {

            var time = new Date().getTime() - start;
            elapsed = Math.floor(time);

            //alert(elapsed);
            //$('#timeEl').text(elapsed + ' ms');

            //displayTime(1);
            timerLoop(elapsed);

        }, 5);
    </script>

</body>

</html>
